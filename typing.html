<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Aurababy Typing Test</title>
<meta name="viewport" content="width=device-width,initial-scale=1" />
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&display=swap" rel="stylesheet">

<style>
:root {
  --purple-deep: #1a0d2e;
  --purple-mid: #2d1b4e;
  --purple-bright: #7b2cbf;
  --blue-bright: #00b4d8;
  --pink-neon: #f72585;
  --white: #ffffff;
  --green-neon: #00ff88;
  --gold: #ffd700;
  --red: #ff0844;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html, body {
  height: 100%;
  font-family: "Poppins", sans-serif;
  color: var(--white);
  overflow-x: hidden;
}

body {
  background: linear-gradient(125deg, #1a0d2e 0%, #2d1b4e 25%, #3e1f5c 50%, #2d1b4e 75%, #1a0d2e 100%);
  background-size: 400% 400%;
  animation: gradientFlow 20s ease infinite;
  position: relative;
}

@keyframes gradientFlow {
  0%, 100% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
}

.orb {
  position: fixed;
  border-radius: 50%;
  filter: blur(90px);
  opacity: 0.35;
  pointer-events: none;
  z-index: 0;
  animation: float 25s ease-in-out infinite;
}

.orb1 {
  width: 600px;
  height: 600px;
  background: var(--purple-bright);
  top: -300px;
  left: -300px;
}

.orb2 {
  width: 500px;
  height: 500px;
  background: var(--blue-bright);
  bottom: -250px;
  right: -250px;
  animation: float 30s ease-in-out infinite reverse;
}

.orb3 {
  width: 450px;
  height: 450px;
  background: var(--pink-neon);
  top: 50%;
  left: 50%;
  animation: float 35s ease-in-out infinite;
}

@keyframes float {
  0%, 100% { transform: translate(0, 0) scale(1); }
  33% { transform: translate(120px, -120px) scale(1.15); }
  66% { transform: translate(-120px, 120px) scale(0.85); }
}

.container {
  position: relative;
  z-index: 1;
  max-width: 1400px;
  margin: 0 auto;
  padding: 40px 20px 120px;
}

.header {
  text-align: center;
  margin-bottom: 50px;
}

.header h1 {
  font-size: 3.5em;
  font-weight: 800;
  background: linear-gradient(135deg, var(--white), var(--blue-bright), var(--pink-neon));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  animation: titleGlow 3s ease-in-out infinite;
  letter-spacing: 3px;
  margin-bottom: 15px;
}

@keyframes titleGlow {
  0%, 100% { filter: drop-shadow(0 0 20px rgba(123,44,191,0.5)); }
  50% { filter: drop-shadow(0 0 40px rgba(247,37,133,0.8)); }
}

.subtitle {
  font-size: 1.3em;
  font-weight: 600;
  opacity: 0.9;
}

.card {
  background: rgba(255,255,255,0.05);
  backdrop-filter: blur(20px);
  border: 2px solid rgba(255,255,255,0.1);
  border-radius: 24px;
  padding: 30px;
  box-shadow: 0 8px 32px rgba(0,0,0,0.3);
  transition: all 0.3s ease;
  position: relative;
  overflow: hidden;
  margin-bottom: 30px;
}

.card::before {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: 24px;
  padding: 2px;
  background: linear-gradient(135deg, var(--purple-bright), var(--blue-bright), var(--pink-neon));
  -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
  mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
  -webkit-mask-composite: xor;
  mask-composite: exclude;
  opacity: 0;
  transition: opacity 0.3s ease;
}

.card:hover::before {
  opacity: 1;
}

/* Secret Code Button */
.secret-section {
  text-align: center;
  margin-bottom: 30px;
}

.secret-btn {
  background: linear-gradient(135deg, #ffd700, #ff8c00);
  border: 3px solid rgba(255,215,0,0.5);
  border-radius: 16px;
  padding: 20px 40px;
  font-size: 1.3em;
  font-weight: 800;
  color: var(--purple-deep);
  cursor: pointer;
  transition: all 0.3s ease;
  box-shadow: 0 0 30px rgba(255,215,0,0.4);
  animation: secretGlow 2s ease-in-out infinite;
  text-transform: uppercase;
  letter-spacing: 2px;
}

.secret-btn:hover {
  transform: scale(1.1) rotate(-2deg);
  box-shadow: 0 0 50px rgba(255,215,0,0.8);
}

.secret-btn.locked {
  background: rgba(255,255,255,0.1);
  border-color: rgba(255,255,255,0.2);
  color: rgba(255,255,255,0.4);
  cursor: not-allowed;
  animation: none;
  box-shadow: none;
}

@keyframes secretGlow {
  0%, 100% { box-shadow: 0 0 30px rgba(255,215,0,0.4); }
  50% { box-shadow: 0 0 50px rgba(255,215,0,0.7); }
}

.code-display {
  background: rgba(255,215,0,0.1);
  border: 3px solid var(--gold);
  border-radius: 16px;
  padding: 30px;
  margin-top: 20px;
  text-align: center;
  display: none;
}

.code-display.show {
  display: block;
  animation: codeReveal 0.5s ease;
}

@keyframes codeReveal {
  0% { transform: scale(0.8); opacity: 0; }
  100% { transform: scale(1); opacity: 1; }
}

.code-text {
  font-size: 2em;
  font-weight: 800;
  color: var(--gold);
  text-shadow: 0 0 20px rgba(255,215,0,0.8);
  letter-spacing: 3px;
}

/* Live Stats */
.live-stats {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
  gap: 20px;
  margin-bottom: 30px;
}

.stat-box {
  background: rgba(255,255,255,0.05);
  border: 2px solid rgba(255,255,255,0.1);
  border-radius: 16px;
  padding: 20px;
  text-align: center;
  transition: all 0.3s ease;
}

.stat-box:hover {
  transform: translateY(-5px);
  border-color: rgba(255,255,255,0.3);
  box-shadow: 0 0 30px rgba(123,44,191,0.4);
}

.stat-value {
  font-size: 2.5em;
  font-weight: 800;
  background: linear-gradient(135deg, var(--blue-bright), var(--pink-neon));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  display: block;
  margin-bottom: 5px;
}

.stat-label {
  font-size: 0.9em;
  opacity: 0.8;
  text-transform: uppercase;
  letter-spacing: 1px;
  font-weight: 600;
}

/* Typing Area */
.typing-area {
  background: rgba(255,255,255,0.08);
  border: 3px solid rgba(255,255,255,0.2);
  border-radius: 20px;
  padding: 40px;
  margin-bottom: 30px;
  min-height: 300px;
  transition: all 0.3s ease;
}

.typing-area:hover {
  border-color: rgba(255,255,255,0.4);
  box-shadow: 0 0 40px rgba(123,44,191,0.3);
}

.text-display {
  font-size: 1.8em;
  line-height: 1.8;
  margin-bottom: 30px;
  font-weight: 400;
  letter-spacing: 1px;
  user-select: none;
}

.text-display span {
  position: relative;
  transition: all 0.1s ease;
}

.text-display span.correct {
  color: var(--green-neon);
  text-shadow: 0 0 10px rgba(0,255,136,0.5);
}

.text-display span.incorrect {
  color: var(--red);
  background: rgba(255,8,68,0.2);
  text-shadow: 0 0 10px rgba(255,8,68,0.5);
}

.text-display span.current {
  background: rgba(255,255,255,0.3);
  animation: blink 1s infinite;
}

@keyframes blink {
  0%, 50%, 100% { opacity: 1; }
  25%, 75% { opacity: 0.5; }
}

#typingInput {
  width: 100%;
  padding: 20px;
  font-size: 1.5em;
  background: rgba(255,255,255,0.1);
  border: 2px solid rgba(255,255,255,0.2);
  border-radius: 12px;
  color: var(--white);
  font-family: 'Poppins', sans-serif;
  font-weight: 600;
  outline: none;
  transition: all 0.3s ease;
}

#typingInput:focus {
  border-color: var(--blue-bright);
  box-shadow: 0 0 30px rgba(0,180,216,0.5);
}

#typingInput:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Controls */
.controls {
  display: flex;
  gap: 15px;
  justify-content: center;
  flex-wrap: wrap;
  margin-bottom: 30px;
}

.btn {
  padding: 15px 35px;
  font-size: 1.2em;
  font-weight: 800;
  border: none;
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.3s ease;
  box-shadow: 0 0 20px rgba(123,44,191,0.4);
}

.btn-primary {
  background: linear-gradient(135deg, var(--purple-bright), var(--pink-neon));
  color: white;
}

.btn-primary:hover {
  transform: translateY(-3px);
  box-shadow: 0 0 30px rgba(247,37,133,0.6);
}

.btn-secondary {
  background: linear-gradient(135deg, var(--blue-bright), var(--green-neon));
  color: var(--purple-deep);
}

.btn-secondary:hover {
  transform: translateY(-3px);
  box-shadow: 0 0 30px rgba(0,255,136,0.6);
}

/* History */
.history-container {
  max-height: 350px;
  overflow-y: auto;
}

.history-item {
  background: rgba(255,255,255,0.05);
  border-radius: 12px;
  padding: 15px 20px;
  margin-bottom: 10px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  transition: all 0.3s ease;
  border: 1px solid rgba(255,255,255,0.1);
}

.history-item:hover {
  background: rgba(255,255,255,0.1);
  transform: translateX(5px);
}

.history-wpm {
  font-size: 1.5em;
  font-weight: 800;
}

.history-badge {
  padding: 5px 15px;
  border-radius: 20px;
  font-size: 0.85em;
  font-weight: 700;
}

.badge-legendary {
  background: linear-gradient(135deg, var(--gold), #ff8c00);
  color: var(--purple-deep);
  box-shadow: 0 0 15px rgba(255,215,0,0.5);
  animation: badgePulse 1.5s ease-in-out infinite;
}

@keyframes badgePulse {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.05); }
}

.badge-fast {
  background: linear-gradient(135deg, var(--green-neon), var(--blue-bright));
  color: var(--purple-deep);
}

.badge-normal {
  background: rgba(255,255,255,0.2);
}

.footer {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  padding: 25px;
  text-align: center;
  background: linear-gradient(to top, rgba(26,13,46,0.95), transparent);
  z-index: 10;
}

.footer-text {
  font-size: 1.5em;
  font-weight: 800;
  letter-spacing: 3px;
  background: linear-gradient(135deg, var(--white), var(--purple-bright), var(--pink-neon));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}

::-webkit-scrollbar {
  width: 10px;
}

::-webkit-scrollbar-track {
  background: rgba(255,255,255,0.05);
  border-radius: 5px;
}

::-webkit-scrollbar-thumb {
  background: linear-gradient(135deg, var(--purple-bright), var(--pink-neon));
  border-radius: 5px;
}

@media (max-width: 768px) {
  .header h1 { font-size: 2.5em; }
  .text-display { font-size: 1.3em; }
  #typingInput { font-size: 1.2em; }
  .live-stats { grid-template-columns: repeat(2, 1fr); }
  .code-text { font-size: 1.5em; }
}
</style>
</head>

<body>
<div class="orb orb1"></div>
<div class="orb orb2"></div>
<div class="orb orb3"></div>

<div class="container">
  <div class="header">
    <h1>‚å®Ô∏è AURABABY TYPING TEST ‚å®Ô∏è</h1>
    <div class="subtitle">Reach 125+ WPM to Unlock the Secret!</div>
  </div>

  <!-- Secret Code Section -->
  <div class="secret-section">
    <button id="secretBtn" class="secret-btn locked" disabled>
      üîí Speed Master Code
    </button>
    <div id="codeDisplay" class="code-display">
      <p style="font-size: 1.2em; margin-bottom: 10px; opacity: 0.9;">üéâ Code Unlocked! üéâ</p>
      <div class="code-text">FastestTYPINGBABYALIVEBABY</div>
    </div>
  </div>

  <!-- Live Stats -->
  <div class="live-stats">
    <div class="stat-box">
      <span class="stat-value" id="liveWPM">0</span>
      <span class="stat-label">Current WPM</span>
    </div>
    <div class="stat-box">
      <span class="stat-value" id="liveAccuracy">100</span>
      <span class="stat-label">Accuracy %</span>
    </div>
    <div class="stat-box">
      <span class="stat-value" id="timeLeft">60</span>
      <span class="stat-label">Time Left</span>
    </div>
  </div>

  <!-- Typing Area -->
  <div class="card typing-area">
    <div class="text-display" id="textDisplay"></div>
    <input 
      type="text" 
      id="typingInput" 
      placeholder="Click here and start typing..."
      autocomplete="off"
      autocorrect="off"
      autocapitalize="off"
      spellcheck="false"
    >
  </div>

  <!-- Controls -->
  <div class="controls">
    <button class="btn btn-primary" id="startBtn">Start Test</button>
    <button class="btn btn-secondary" id="resetBtn">Reset</button>
  </div>

  <!-- Overall Stats -->
  <div class="card">
    <h2 style="font-size: 1.8em; margin-bottom: 25px; text-align: center;">üìä Your Statistics</h2>
    <div class="live-stats">
      <div class="stat-box">
        <span class="stat-value" id="avgWPM">--</span>
        <span class="stat-label">Average WPM</span>
      </div>
      <div class="stat-box">
        <span class="stat-value" id="bestWPM">--</span>
        <span class="stat-label">Best WPM</span>
      </div>
      <div class="stat-box">
        <span class="stat-value" id="totalTests">0</span>
        <span class="stat-label">Total Tests</span>
      </div>
      <div class="stat-box">
        <span class="stat-value" id="legendaryCount">0</span>
        <span class="stat-label">125+ WPM Tests</span>
      </div>
    </div>
  </div>

  <!-- History -->
  <div class="card">
    <h2 style="font-size: 1.8em; margin-bottom: 20px; text-align: center;">üìú Recent Tests</h2>
    <div class="history-container" id="historyContainer">
      <p style="text-align: center; opacity: 0.6; padding: 20px;">No tests completed yet. Start typing!</p>
    </div>
  </div>
</div>

<div class="footer">
  <div class="footer-text">aurababy</div>
</div>

<script>
const sentences = [
  "The quick brown fox jumps over the lazy dog while the sun sets beautifully.",
  "Programming is the art of telling another human what one wants the computer to do.",
  "Life is like riding a bicycle to keep your balance you must keep moving forward.",
  "The greatest glory in living lies not in never falling but in rising every time we fall.",
  "Success is not final failure is not fatal it is the courage to continue that counts.",
  "The only way to do great work is to love what you do and never give up on your dreams.",
  "Innovation distinguishes between a leader and a follower in every aspect of life.",
  "Your time is limited so don't waste it living someone else's life and dreams.",
  "The future belongs to those who believe in the beauty of their dreams and aspirations.",
  "Believe you can and you're halfway there to achieving your ultimate goals in life."
];

let currentText = '';
let currentIndex = 0;
let startTime = null;
let timerInterval = null;
let timeLeft = 60;
let isTestActive = false;
let correctChars = 0;
let incorrectChars = 0;
let totalTests = 0;
let allWPMs = [];
let bestWPM = 0;
let legendaryCount = 0;
let secretUnlocked = false;

const textDisplay = document.getElementById('textDisplay');
const typingInput = document.getElementById('typingInput');
const startBtn = document.getElementById('startBtn');
const resetBtn = document.getElementById('resetBtn');
const secretBtn = document.getElementById('secretBtn');
const codeDisplay = document.getElementById('codeDisplay');

// Load saved progress
async function loadProgress() {
  try {
    const stats = await window.storage.get('typing-stats');
    if (stats && stats.value) {
      const data = JSON.parse(stats.value);
      totalTests = data.totalTests || 0;
      allWPMs = data.allWPMs || [];
      bestWPM = data.bestWPM || 0;
      legendaryCount = data.legendaryCount || 0;
      secretUnlocked = data.secretUnlocked || false;
      
      updateOverallStats();
      
      if (secretUnlocked) {
        unlockSecret();
      }
    }
  } catch (e) {
    console.log('No saved progress found');
  }
  
  try {
    const history = await window.storage.get('typing-history');
    if (history && history.value) {
      const tests = JSON.parse(history.value);
      tests.forEach(test => addToHistory(test.wpm, test.accuracy, false));
    }
  } catch (e) {
    console.log('No history found');
  }
}

// Save progress
async function saveProgress() {
  const data = {
    totalTests,
    allWPMs,
    bestWPM,
    legendaryCount,
    secretUnlocked
  };
  
  try {
    await window.storage.set('typing-stats', JSON.stringify(data));
  } catch (e) {
    console.error('Failed to save stats:', e);
  }
}

function generateText() {
  currentText = sentences[Math.floor(Math.random() * sentences.length)];
  textDisplay.innerHTML = currentText.split('').map(char => 
    `<span>${char}</span>`
  ).join('');
  currentIndex = 0;
}

function startTest() {
  if (isTestActive) return;
  
  isTestActive = true;
  timeLeft = 60;
  currentIndex = 0;
  correctChars = 0;
  incorrectChars = 0;
  startTime = Date.now();
  
  generateText();
  typingInput.value = '';
  typingInput.disabled = false;
  typingInput.focus();
  
  startBtn.textContent = 'Testing...';
  startBtn.disabled = true;
  
  timerInterval = setInterval(updateTimer, 1000);
}

function updateTimer() {
  timeLeft--;
  document.getElementById('timeLeft').textContent = timeLeft;
  
  if (timeLeft <= 0) {
    endTest();
  }
}

function endTest() {
  isTestActive = false;
  clearInterval(timerInterval);
  typingInput.disabled = true;
  startBtn.textContent = 'Start Test';
  startBtn.disabled = false;
  
  const elapsedMinutes = (60 - timeLeft) / 60;
  const wordsTyped = (correctChars / 5);
  const finalWPM = Math.round(wordsTyped / elapsedMinutes);
  const accuracy = Math.round((correctChars / (correctChars + incorrectChars)) * 100) || 0;
  
  totalTests++;
  allWPMs.push(finalWPM);
  
  if (finalWPM > bestWPM) {
    bestWPM = finalWPM;
  }
  
  if (finalWPM >= 125) {
    legendaryCount++;
    if (!secretUnlocked) {
      unlockSecret();
      secretUnlocked = true;
    }
  }
  
  updateOverallStats();
  addToHistory(finalWPM, accuracy, true);
  saveProgress();
}

function updateOverallStats() {
  document.getElementById('totalTests').textContent = totalTests;
  document.getElementById('legendaryCount').textContent = legendaryCount;
  
  if (allWPMs.length > 0) {
    const avgWPM = Math.round(allWPMs.reduce((a, b) => a + b, 0) / allWPMs.length);
    document.getElementById('avgWPM').textContent = avgWPM;
    document.getElementById('bestWPM').textContent = bestWPM;
  }
}

function addToHistory(wpm, accuracy, save) {
  const container = document.getElementById('historyContainer');
  
  if (totalTests === 1 && save) {
    container.innerHTML = '';
  }
  
  const item = document.createElement('div');
  item.className = 'history-item';
  
  const info = document.createElement('div');
  const wpmSpan = document.createElement('div');
  wpmSpan.className = 'history-wpm';
  wpmSpan.textContent = wpm + ' WPM';
  
  const accSpan = document.createElement('div');
  accSpan.style.fontSize = '0.9em';
  accSpan.style.opacity = '0.8';
  accSpan.textContent = accuracy + '% accuracy';
  
  info.appendChild(wpmSpan);
  info.appendChild(accSpan);
  
  const badge = document.createElement('span');
  badge.className = 'history-badge';
  
  if (wpm >= 125) {
    badge.classList.add('badge-legendary');
    badge.textContent = 'üëë LEGENDARY';
  } else if (wpm >= 80) {
    badge.classList.add('badge-fast');
    badge.textContent = '‚ö° FAST';
  } else {
    badge.classList.add('badge-normal');
    badge.textContent = '‚úì GOOD';
  }
  
  item.appendChild(info);
  item.appendChild(badge);
  
  container.insertBefore(item, container.firstChild);
  
  while (container.children.length > 10) {
    container.removeChild(container.lastChild);
  }
  
  if (save) {
    saveHistory();
  }
}

async function saveHistory() {
  const items = Array.from(document.getElementById('historyContainer').children)
    .slice(0, 10)
    .map(item => {
      const wpmText = item.querySelector('.history-wpm').textContent;
      const accText = item.querySelector('div > div:last-child').textContent;
      return {
        wpm: parseInt(wpmText),
        accuracy: parseInt(accText)
      };
    });
  
  try {
    await window.storage.set('typing-history', JSON.stringify(items));
  } catch (e) {
    console.error('Failed to save history:', e);
  }
}

function unlockSecret() {
  secretBtn.classList.remove('locked');
  secretBtn.disabled = false;
  secretBtn.textContent = 'üîì Speed Master Code';
  
  secretBtn.addEventListener('click', () => {
    codeDisplay.classList.toggle('show');
  });
}

typingInput.addEventListener('input', (e) => {
  if (!isTestActive) return;
  
  const typed = e.target.value;
  const spans = textDisplay.querySelectorAll('span');
  
  spans.forEach((span, index) => {
    span.classList.remove('correct', 'incorrect', 'current');
    
    if (index < typed.length) {
      if (typed[index] === currentText[index]) {
        span.classList.add('correct');
        if (index === typed.length - 1) {
          correctChars = typed.length;
        }
      } else {
        span.classList.add('incorrect');
      }
    } else if (index === typed.length) {
      span.classList.add('current');
    }
  });
  
  const totalTyped = typed.length;
  const correct = typed.split('').filter((char, i) => char === currentText[i]).length;
  incorrectChars = totalTyped - correct;
  correctChars = correct;
  
  const elapsedMinutes = (Date.now() - startTime) / 60000;
  const wordsTyped = (correct / 5);
  const currentWPM = Math.round(wordsTyped / elapsedMinutes);
  const accuracy = Math.round((correct / totalTyped) * 100) || 100;
  
  document.getElementById('liveWPM').textContent = currentWPM;
  document.getElementById('liveAccuracy').textContent = accuracy;
  
  if (typed === currentText) {
    generateText();
    e.target.value = '';
  }
});

startBtn.addEventListener('click', startTest);

resetBtn.addEventListener('click', () => {
  if (isTestActive) {
    clearInterval(timerInterval);
    isTestActive = false;
  }
  
  timeLeft = 60;
  currentIndex = 0;
  correctChars = 0;
  incorrectChars = 0;
  
  typingInput.value = '';
  typingInput.disabled = true;
  startBtn.textContent = 'Start Test';
  startBtn.disabled = false;
  
  document.getElementById('liveWPM').textContent = '0';
  document.getElementById('liveAccuracy').textContent = '100';
  document.getElementById('timeLeft').textContent = '60';
  
  generateText();
});

generateText();
loadProgress();
</script>
</body>
</html>
